<div class="container">
  <div class="row">
    <div class="col-md-4">
      <img
        class="profilePic"
        src="{{ loggedInUser?.imageURL }}"
        alt="profile picture"
      />
    </div>
    <div class="col-md-8">
      <h2>
        {{ loggedInUser?.username }}
        <img
          class="ranking"
          src="../../../assets/images/platinum.png"
          alt="ranking"
        />
      </h2>
      <p>
        {{ loggedInUser?.firstname }} {{ loggedInUser?.lastname }}
        <button type="button" class="btn btn-link" (click)="editName()">
          Edit
        </button>
      </p>
      <div *ngIf="isEditName === true">
        <form>
          <div class="form-group">
            <label for="firstName">First:</label>
            <input
              type="text"
              class="form-control"
              name="firstName"
              [(ngModel)]="loggedInUser!.firstname"
            />
            <label for="firstName">Last:</label>
            <input
              type="text"
              class="form-control"
              name="lastName"
              [(ngModel)]="loggedInUser!.lastname"
            />
            <button (click)="updateAccount(loggedInUser!, loggedInUser!.id)">
              Save
            </button>
          </div>
        </form>
      </div>
      <p>
        Bio: {{ loggedInUser?.biography }}
        <button type="button" class="btn btn-link" (click)="editBio()">
          Edit
        </button>
      </p>

      <div *ngIf="isEditBio === true">
        <form>
          <div class="form-group">
            <label for="firstName">Bio:</label>
            <input
              type="text"
              class="form-control"
              name="firstName"
              [(ngModel)]="loggedInUser!.biography"
            />
            <button (click)="updateAccount(loggedInUser!, loggedInUser!.id)">
              Save
            </button>
          </div>
        </form>
      </div>

      <h5>Contact Information</h5>
      <p>
        {{ loggedInUser?.phone }}
        <button type="button" class="btn btn-link" (click)="editPhone()">
          Edit
        </button>
      </p>

      <div *ngIf="isEditPhone === true">
        <form>
          <div class="form-group">
            <label for="phone">Phone:</label>
            <input
              type="text"
              class="form-control"
              name="phone"
              [(ngModel)]="loggedInUser!.phone"
            />
            <button (click)="updateAccount(loggedInUser!, loggedInUser!.id)">
              Save
            </button>
          </div>
        </form>
      </div>

      <p>
        Email: {{ loggedInUser?.email }}
        <button type="button" class="btn btn-link" (click)="editEmail()">
          Edit
        </button>
      </p>
      <div *ngIf="isEditEmail === true">
        <form>
          <div class="form-group">
            <label for="firstName">Email:</label>
            <input
              type="text"
              class="form-control"
              name="firstName"
              [(ngModel)]="loggedInUser!.email"
            />
            <button (click)="updateAccount(loggedInUser!, loggedInUser!.id)">
              Save
            </button>
          </div>
        </form>
      </div>

      <p>Availability: {{ loggedInUser?.availability }}  <button type="button" class="btn btn-link" (click)="editAvailability()">
        Edit
      </button> </p>
      <div *ngIf="isEditAvailability === true">
        <form>
          <div class="form-group">
            <label for="firstName">Availability:</label>
            <input
              type="text"
              class="form-control"
              name="firstName"
              [(ngModel)]="loggedInUser!.availability"
            />
            <button (click)="updateAccount(loggedInUser!, loggedInUser!.id)">
              Save
            </button>
          </div>
        </form>
      </div>
      <h3>Tasks Offering:</h3>
      <ul>
        <li *ngFor="let task of loggedInUser?.tasks">{{ task.name }}</li>
      </ul>

      <div *ngIf="loggedInUser?.userSkills">
        <h3 *ngIf="loggedInUser?.userSkills">Certifications:</h3>
        <ul>
          <li *ngFor="let userSkill of loggedInUser?.userSkills">
            {{ userSkill.certification }}
          </li>
        </ul>
      </div>
      <h3>Skills:</h3>
      <ul>
        <li *ngFor="let userSkill of loggedInUser?.userSkills">
          {{ userSkill.skill.name }} ({{ userSkill.skillLevel.name }})
        </li>
      </ul>

      <h3>Followers:</h3>
      <ul>
        <li *ngFor="let userFriend of loggedInUser?.friends">
          {{ userFriend.username }}
        </li>
      </ul>

      <h3>Add Skills:</h3>
      <form>
        <div class="form-group">
          <label for="skills">Skill:</label>
          <select
            class="form-control"
            [(ngModel)]="newUserSkill.skill.id"
            name="skills"
            id="skills"
          >
            <option *ngFor="let skill of skills" value="{{ skill.id }}">
              {{ skill.name }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label for="skill-levels">Skill Level:</label>
          <select
            class="form-control"
            [(ngModel)]="newUserSkill.skillLevel.id"
            name="skill-levels"
            id="skill-levels"
          >
            <option
              *ngFor="let skillLevel of skillLevels"
              value="{{ skillLevel.id }}"
            >
              {{ skillLevel.name }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <label for="certification">Certification:</label>
          <input
            type="text"
            class="form-control"
            name="certification"
            [(ngModel)]="newUserSkill.certification"
          />
        </div>

        <button
          type="submit"
          class="btn btn-primary"
          (click)="createUserSkill(newUserSkill)"
        >
          Add Skill
        </button>
      </form>
    </div>
  </div>
</div>
